# خطوات نشر الشات (chat-app-new) على الإنترنت

بعد أن يعمل التطبيق محلياً، الخطوة التالية هي نشره حتى يُفتح من أي جهاز (موبايل، كمبيوتر) عبر رابط.

---

# الجزء الأول: نشر الباكند على Koyeb

## 1 — رفع الباكند إلى GitHub

**اختر أحد الطريقتين:**

**أ) مستودع منفصل للباكند (مُفضّل)**  
1. أنشئ مستودعاً جديداً على GitHub (مثلاً اسمه: `chat-app-new-backend`).  
2. انسخ داخل المستودع **كل محتويات** مجلد `chat-app-new/backend` فقط (الملفات في الجذر: `index.js`, `db.js`, `package.json`, والمجلدات `middleware`, `routes`, `uploads`).  
3. ارفع التعديلات (Push) للمستودع.

**ب) نفس مستودع المشروع الكبير**  
1. تأكد أن مشروعك (المجلد الذي فيه `chat-app-new`) مربوط بمستودع GitHub وتم عمل Push لأحدث التعديلات.  
2. سنستخدم في Koyeb أوامر البناء مع الدخول لمجلد الباكند (في الخطوة 3).

---

## 2 — فتح Koyeb وربط المستودع

1. افتح **koyeb.com** وسجّل الدخول.
2. اضغط **Create** أو **Deploy** → **Create a new service**.
3. في **Source** اختر **GitHub** وربط حسابك إن لم يكن مربوطاً.
4. اختر المستودع:
   - لو استخدمت **(أ):** اختر مستودع الباكند فقط (مثل `chat-app-new-backend`).
   - لو استخدمت **(ب):** اختر مستودع المشروع الكبير.
5. الفرع: **main** (أو الافتراضي).
6. اضغط **Next**.

---

## 3 — إعدادات البناء والتشغيل

**لو المستودع = باكند فقط (الطريقة أ):**

| الحقل | القيمة |
|--------|--------|
| Build command | `npm install` |
| Run command | `npm start` |

**لو المستودع = المشروع الكامل (الطريقة ب):**

| الحقل | القيمة |
|--------|--------|
| Build command | `cd chat-app-new/backend && npm install` |
| Run command | `cd chat-app-new/backend && npm start` |

- **Root directory / Work directory:** اتركه فارغاً.
- اضغط **Next**.

---

## 4 — متغيرات البيئة

1. في **Environment variables** اضغط **Add variable**.
2. أضف:
   - **Name:** `JWT_SECRET`  
   - **Value:** كلمة سر طويلة (مثلاً: `MyChatSecret2025XYZ`)
3. (اختياري) لو ظهر عندك **Port:** اتركه أو ضعه `5000`.
4. اضغط **Deploy** أو **Create service**.

---

## 5 — نسخ رابط الباكند

1. انتظر حتى تصبح الحالة **Running** أو **Success**.
2. انسخ **رابط الخدمة** (مثل: `https://your-service-name.koyeb.app`).
3. **احتفظ به** — سنضعه في الواجهة (Vercel).  
   تأكد أن الرابط **بدون** `/` في النهاية.

---

# الجزء الثاني: نشر الواجهة على Vercel

## 6 — رفع الفرونتند إلى GitHub

**لو استخدمت مستودع باكند منفصل (أ):**  
أنشئ مستودعاً آخر للواجهة (مثلاً `chat-app-new-frontend`) وارفع فيه **كل محتويات** مجلد `chat-app-new/frontend` فقط.

**لو استخدمت مستودع واحد (ب):**  
لا تحتاج خطوة إضافية؛ المستودع الحالي فيه مجلد `chat-app-new/frontend`.

---

## 7 — إضافة المشروع في Vercel

1. افتح **vercel.com** وسجّل الدخول (يفضل عبر GitHub).
2. **Add New…** → **Project**.
3. اختر المستودع المناسب:
   - لو مستودع واجهة منفصل: اختره.
   - لو مستودع واحد: اختر مستودع المشروع الكبير.
4. اضغط **Import**.

---

## 8 — تحديد مجلد الواجهة (لو المستودع واحد)

لو المستودع فيه مجلد `chat-app-new/frontend`:

1. قبل Deploy ابحث عن **Root Directory**.
2. اضغط **Edit** واكتب: **chat-app-new/frontend**
3. تأكد بدون مسافات قبل أو بعد.

لو المستودع = واجهة فقط، اترك **Root Directory** فارغاً.

---

## 9 — متغير رابط الباكند (مهم)

1. في **Environment Variables** اضغط **Add**.
2. **Name:** `VITE_API_URL`
3. **Value:** الصق **رابط Koyeb** اللي نسخته في الخطوة 5 (بدون `/` في الآخر).  
   مثال: `https://your-service-name.koyeb.app`
4. احفظ ثم اضغط **Deploy**.

---

## 10 — رابط الشات النهائي

1. بعد انتهاء النشر اضغط **Visit** أو انسخ رابط المشروع (مثل: `https://chat-app-new-xxx.vercel.app`).
2. **هذا الرابط هو رابط الشات** — يمكن فتحه من الموبايل أو أي جهاز ومشاركته مع الآخرين.

---

# ملخص

| ماذا | أين |
|------|-----|
| الباكند | Koyeb — رابط مثل `https://xxx.koyeb.app` |
| الواجهة | Vercel — رابط مثل `https://xxx.vercel.app` |
| متغير الواجهة | `VITE_API_URL` = رابط Koyeb (بدون `/` في الآخر) |

الباكند الحالي يسمح بأي مصدر (CORS مفتوح)، فلا تحتاج عادةً إضافة رابط Vercel في Koyeb.

لو توقف عند خطوة معينة أو ظهر خطأ، اكتب رقم الخطوة ورسالة الخطأ وسنوضح الخطوة التالية.
