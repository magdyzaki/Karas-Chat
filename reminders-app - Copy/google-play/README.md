# Karas تنبيهات — تجهيز التطبيق للرفع على جوجل بلاي

هذا المجلد جاهز لبناء تطبيق أندرويد من نفس برنامج الويب (PWA) بحيث يمكنك رفعه على Google Play بعد دفع رسوم الحساب.

---

## ما الذي ستحصل عليه؟

- **نوع الملفات:** مشروع أندرويد عادي (يمكن فتحه في Android Studio).
- **النتيجة:** ملف **AAB** (Android App Bundle) ترفعه في Play Console.
- **لا تحتاج** ترتيب ملفات مختلف عن المشروع الحالي؛ هذا المجلد يربط الواجهة الجاهزة بمشروع أندرويد فقط.

---

## المتطلبات قبل البدء

1. **Node.js** مثبت على جهازك.
2. **Android Studio** مثبت (للبناء النهائي والتوقيع).
3. حساب **مطوّر جوجل بلاي** ودفع الرسوم (مرة واحدة).
4. أن يكون **الباكند** (السيرفر) يعمل على عنوان ثابت (مثلاً على Koyeb أو Render)، وأن تعرف هذا العنوان.

---

## الخطوات بالترتيب

### 1) ضبط عنوان الباكند (مهم)

التطبيق يتصل بالباكند عبر متغير البيئة `VITE_API_URL`. قبل أي بناء:

- ادخل مجلد الواجهة: `reminders-app/frontend`
- أنشئ ملفاً اسمه `.env` (إن لم يكن موجوداً) واكتب فيه:
  ```env
  VITE_API_URL=https://عنوان-الباكند-الفعلي-لديك
  ```
- استبدل `https://عنوان-الباكند-الفعلي-لديك` بالرابط الحقيقي لسيرفرك (بدون `/api` في النهاية).

### 2) بناء واجهة الويب

من **جذر المشروع** (مجلد `Smart_CRM_Final_Arabic` أو حيث يوجد `reminders-app`):

```bash
cd reminders-app/frontend
npm install
npm run build
```

يُنتج ذلك مجلد `reminders-app/frontend/dist` (هذا هو ما سيستخدمه مشروع أندرويد).

### 3) تجهيز مشروع جوجل بلاي

من **جذر المشروع**:

```bash
cd reminders-app/google-play
npm install
npx cap add android
npx cap sync android
```

- أول مرة: `npx cap add android` ينشئ مجلد `android` (مشروع أندرويد).
- `npx cap sync android` ينسخ محتويات `frontend/dist` إلى مشروع أندرويد.

### 4) فتح المشروع في Android Studio

من نفس المجلد `google-play`:

```bash
npx cap open android
```

يفتح Android Studio على مشروع أندرويد جاهز.

### 5) بناء ملف الـ AAB للرفع على المتجر

داخل **Android Studio**:

1. من القائمة: **Build** → **Generate Signed Bundle / APK**
2. اختر **Android App Bundle** ثم **Next**
3. إن لم يكن لديك مفتاح توقيع:
   - اختر **Create new**
   - حدد مسار الملف وكلمة المرور وبيانات الشهادة (اسم، منظمة، إلخ) واحفظها في مكان آمن
4. اختر المفتاح ثم **Next**
5. اختر **release** ثم **Finish**

سيُنتج ملف **AAB** داخل مجلد مثل:  
`android/app/release/app-release.aab`

### 6) رفع التطبيق على جوجل بلاي

1. ادخل [Play Console](https://play.google.com/console)
2. أنشئ تطبيقاً جديداً (أو اختر تطبيقاً موجوداً)
3. من قسم **الإنتاج** (Production) أو **الاختبار** (Testing): **إنشاء إصدار جديد**
4. ارفع ملف الـ **AAB** الذي أنتجته
5. أكمل البيانات المطلوبة (الوصف، لقطات شاشة، سياسة الخصوصية، إلخ) ثم أرسل للمراجعة

---

## ملخص ترتيب الملفات

| ماذا تفعل أين؟ | الوصف |
|----------------|--------|
| **reminders-app/frontend** | الواجهة كما هي؛ تبنيها بـ `npm run build` فتُنتج `dist` |
| **reminders-app/google-play** | إعداد Capacitor وربطه بـ `../frontend/dist`؛ لا تغيّر ترتيب ملفات البرنامج الأصلي |
| **reminders-app/google-play/android** | يُنشأ تلقائياً بعد `cap add android`؛ هو مشروع أندرويد الكامل الذي تفتحه في Android Studio وتُخرج منه الـ AAB |

لا تحتاج إلى "نوع آخر" من الملفات أو ترتيب مختلف للمشروع الأصلي؛ فقط تبني الواجهة ثم تستخدم هذا المجلد لبناء أندرويد وملف واحد (AAB) للرفع.

---

## إذا ظهرت مشاكل

- **البناء يفشل:** تأكد أنك نفذت `npm run build` داخل `frontend` وأن مجلد `frontend/dist` موجود قبل تشغيل `cap sync`.
- **التطبيق لا يتصل بالسيرفر:** راجع أن `VITE_API_URL` في `frontend/.env` يشير إلى عنوان الباكند الصحيح وأعد `npm run build` ثم `cap sync` من مجلد `google-play`.
- **Android Studio يشتكي من إصدار Java أو SDK:** حدّث JDK و Android SDK من إعدادات Android Studio حسب الرسالة.

بعد دفع رسوم جوجل بلاي، تنفيذ الخطوات أعلاه يجهّز لك ملف الـ AAB جاهزاً للرفع من هذا المجلد المستقل دون الحاجة لتغيير بقية ملفات البرنامج.
