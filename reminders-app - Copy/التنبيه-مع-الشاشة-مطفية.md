# تفعيل التنبيه مع الشاشة مطفية (Push Notifications)

تم إضافة **إشعارات الدفع (Push Notifications)** حتى يصل التنبيه للجهاز حتى لو كانت الشاشة مطفية أو التطبيق مغلق.

## ما الذي تم؟

- **السيرفر (Backend):** يتحقق كل دقيقة من التنبيهات المستحقة ويرسل Push لكل جهاز مشترك.
- **الواجهة (Frontend):** بعد تسجيل الدخول تشترك تلقائياً في Push وترسل الاشتراك للسيرفر.
- **Service Worker:** يستقبل الـ Push ويعرض الإشعار (عنوان + نص).

## مطلوب على Koyeb (مرة واحدة)

لكي يعمل الإرسال من السيرفر، تحتاج إضافة **مفتاحي VAPID** في Environment Variables على Koyeb:

1. شغّل السيرفر **محلياً** مرة واحدة:
   ```bash
   cd reminders-app/backend
   npm install
   npm start
   ```
2. في الـ Console ستظهر سطران مثل:
   ```
   VAPID_PUBLIC_KEY=BN...
   VAPID_PRIVATE_KEY=...
   ```
3. انسخ القيم (بدون المسافات).
4. على **Koyeb** → خدمتك **reminders-backend** → **Settings** → **Environment Variables**.
5. أضف متغيرين:
   - **Name:** `VAPID_PUBLIC_KEY`  **Value:** القيمة التي نسختها
   - **Name:** `VAPID_PRIVATE_KEY`  **Value:** القيمة التي نسختها
6. احفظ ثم اعمل **Redeploy** للخدمة.

بعدها السيرفر سيستخدم نفس المفاتيح دائماً والـ Push سيعمل حتى مع الشاشة مطفية.

## على الموبايل

- عند أول تسجيل دخول اسمح **للإشعارات** عندما يطلب المتصفح.
- بعدها الاشتراك يتم تلقائياً والتنبيه يصل حتى لو الشاشة مطفية.
