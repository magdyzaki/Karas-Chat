# دليل النسخة النهائية والتجهيز لجوجل بلاي

---

## 1) أين مجلد البرنامج النهائي؟

### المجلد الرئيسي للنسخة النهائية

```
D:\programs\Smart_CRM_Final_Arabic\reminders-app
```

أو من جذر المشروع: `Smart_CRM_Final_Arabic\reminders-app`

### ما بداخله

| المجلد/الملف | الوصف |
|--------------|--------|
| **frontend/** | الواجهة (React/Vite) — ما يُعرض للمستخدم |
| **backend/** | الباكند (Node/Express) — السيرفر والـ API |
| **google-play/** | مشروع تجهيز التطبيق لأندرويد وجوجل بلاي |
| **deploy-frontend.ps1** | سكربت رفع الواجهة إلى Vercel |
| **deploy-backend.ps1** | سكربت رفع الباكند |

---

## 2) إنشاء نسخة احتياطية

للاحتفاظ بنسخة نهائية كاملة:

1. انسخ المجلد بالكامل:
   ```
   D:\programs\Smart_CRM_Final_Arabic\reminders-app
   ```
2. ضعه في مكان آمن (مثل: نسخة احتياطية، قرص خارجي، أو أرشيف مضغوط).

أو من PowerShell لإنشاء أرشيف:

```powershell
Compress-Archive -Path "D:\programs\Smart_CRM_Final_Arabic\reminders-app" -DestinationPath "D:\backup\reminders-app-$(Get-Date -Format 'yyyy-MM-dd').zip"
```

---

## 3) تجهيز الملف للرفع على جوجل بلاي

### المتطلبات

- **Node.js** مثبت
- **Android Studio** مثبت
- حساب مطوّر جوجل بلاي (بعد دفع 25 دولار)
- رابط الباكند على Koyeb (مثل: `https://reminders-backend-xxx.koyeb.app`)

---

### الخطوة 1: ضبط رابط الباكند

أنشئ ملف `.env` داخل مجلد الواجهة (إن لم يكن موجوداً):

المسار: `D:\programs\Smart_CRM_Final_Arabic\reminders-app\frontend\.env`

المحتوى (غيّر الرابط حسب رابطك الفعلي):

```
VITE_API_URL=https://رابط-الباكند-على-Koyeb
```

مثال: `VITE_API_URL=https://reminders-backend-xxxxx.koyeb.app`

بدون `/` في النهاية.

---

### الخطوة 2: بناء الواجهة

```powershell
cd D:\programs\Smart_CRM_Final_Arabic\reminders-app\frontend
npm install
npm run build
```

يُنشئ هذا مجلد `dist` داخله.

---

### الخطوة 3: تجهيز مشروع أندرويد (Capacitor)

```powershell
cd D:\programs\Smart_CRM_Final_Arabic\reminders-app\google-play
npm install
npx cap add android
npx cap sync android
```

- `cap add android` ينشئ مجلد `android` (أول مرة فقط).
- `cap sync android` ينسخ محتويات `frontend/dist` إلى المشروع الأندرويد.

---

### الخطوة 4: فتح المشروع في Android Studio

```powershell
cd D:\programs\Smart_CRM_Final_Arabic\reminders-app\google-play
npx cap open android
```

---

### الخطوة 5: بناء ملف AAB للرفع

داخل **Android Studio**:

1. من القائمة: **Build** → **Generate Signed Bundle / APK**
2. اختر **Android App Bundle** ثم **Next**
3. إن لم يكن لديك مفتاح توقيع:
   - اختر **Create new**
   - حدد مسار حفظ المفتاح، كلمة مرور، وبيانات الشهادة (الاسم، المنظمة، إلخ)
   - **احفظ المفتاح في مكان آمن** — ستحتاجه لكل تحديث مستقبلي
4. اختر المفتاح ثم **Next**
5. اختَر **release** ثم **Finish**

سيُنتج ملف مثل:

```
reminders-app\google-play\android\app\release\app-release.aab
```

---

### الخطوة 6: رفع التطبيق على جوجل بلاي

1. ادخل **https://play.google.com/console**
2. أنشئ تطبيقاً جديداً أو اختر تطبيقاً موجوداً
3. من **الإنتاج** أو **الاختبار** → **إنشاء إصدار جديد**
4. ارفع ملف **app-release.aab**
5. أكمل البيانات المطلوبة:
   - الوصف القصير والطويل
   - لقطات شاشة (2–8 صور)
   - أيقونة التطبيق (512×512)
   - سياسة الخصوصية (رابط لصفحة توضح ما تجمعه من بيانات)
   - تصنيف المحتوى
6. أرسل للمراجعة

---

## ملخص المسارات

| ماذا | أين |
|------|-----|
| النسخة النهائية | `D:\programs\Smart_CRM_Final_Arabic\reminders-app` |
| الواجهة | `reminders-app\frontend` |
| الباكند | `reminders-app\backend` |
| تجهيز أندرويد | `reminders-app\google-play` |
| ملف AAB بعد البناء | `reminders-app\google-play\android\app\release\app-release.aab` |

---

## تحديث التطبيق على جوجل بلاي لاحقاً

1. عدّل الكود في `reminders-app\frontend`
2. عدّل رقم الإصدار في `google-play\package.json` (مثلاً `"version":"1.0.1"`)
3. نفّذ: بناء الواجهة → cap sync → فتح Android Studio → Generate Signed Bundle
4. ارفع الـ AAB الجديد في Play Console كإصدار جديد
