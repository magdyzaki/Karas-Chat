# كيف تعرف أن مشكلة حذف التنبيهات اتحلت؟

## سبب المشكلة

السيرفر (على **Koyeb** أو غيره) يخزّن قاعدة البيانات في **مجلد مؤقت**. عند إعادة تشغيل السيرفر أو نومه (Scale to Zero)، هذا المجلد يُمسح فتُفقد كل التنبيهات والمستخدمين — حتى التنبيهات اللي موعدها بعد أيام أو أسبوع.

## ما تم عمله في الكود

- إضافة **تحذير** عند تشغيل السيرفر إذا لم يكن متغير **DB_PATH** مضبوطاً (يظهر في الـ Logs).
- توثيق خطوة **التخزين الدائم** حسب المنصة:
  - **Koyeb:** ملف **تخزين-التنبيهات-دائماً-على-Koyeb.md** (Volume + DB_PATH).
  - **Render:** ملف **DEPLOY-RENDER.md** (قسم «الخطوة المهمة: تخزين التنبيهات بشكل دائم»).

## ما الذي يجب أن تفعله أنت

- **لو بتستخدم Koyeb** (GitHub + Koyeb + Vercel): اتبع الخطوات في **تخزين-التنبيهات-دائماً-على-Koyeb.md** (إنشاء Volume، ربطه بالخدمة، ضبط **DB_PATH** = `/data/reminders-db.json`، ثم Redeploy).  
  ملاحظة: Volumes على Koyeb تعمل مع خطط Standard وليس Free/Eco — انظر التفاصيل في الملف.
- **لو بتستخدم Render:** اتبع **DEPLOY-RENDER.md** (Persistent Disk + DB_PATH).

## كيف تتأكد أن المشكلة اتحلت؟

### 1) من سجلات السيرفر (Logs)

- **Koyeb:** ادخل **koyeb.com** → خدمتك → **Logs**.
- **Render:** ادخل **dashboard.render.com** → خدمتك → **Logs**.

بعد إعادة التشغيل أو النشر، لو **لم يعد** يظهر التحذير التالي فمعناه إن **DB_PATH** مضبوط:
- `*** تحذير: DB_PATH غير مضبوط. البيانات ... ستُفقد عند إعادة تشغيل السيرفر ***`

### 2) اختبار عملي

1. **قبل** تطبيق الخطوة: أضف تنبيهاً، أغلق التطبيق، اعمل **Redeploy** من Koyeb (أو Render). افتح التطبيق مرة ثانية — غالباً القائمة فاضية أو التنبيه اختفى.
2. **بعد** تطبيق الخطوة (Volume/Disk + DB_PATH + Redeploy):
   - أضف تنبيهاً جديداً (مثلاً بعد أسبوع).
   - اعمل **Redeploy** من لوحة التحكم.
   - افتح التطبيق وسجّل الدخول مرة ثانية.
   - **المفروض** تشوف نفس التنبيه (والتنبيهات القديمة) لسه موجودين.

لو التنبيهات بقيت موجودة بعد إعادة النشر/التشغيل، يبقى **المشكلة اتحلت** والبيانات بتتخزن بشكل دائم.
