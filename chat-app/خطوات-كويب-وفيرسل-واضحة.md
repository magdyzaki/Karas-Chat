# خطوات نشر الشات على Koyeb و Vercel — من أول خطوة لآخر خطوة

اتبع الخطوات بالترتيب، ولا تتخطّ أي خطوة.

---

# الجزء الأول: نشر الباكند على Koyeb

## الخطوة 1 — فتح موقع Koyeb
1. افتح المتصفح واكتب في شريط العنوان: **koyeb.com**
2. اضغط Enter.
3. لو طلب منك تسجيل دخول أو إنشاء حساب، سجّل دخول (يمكن عبر Gmail أو GitHub).

---

## الخطوة 2 — بدء خدمة جديدة
1. من الصفحة الرئيسية اضغط الزر الأزرق **Create** أو **Deploy**.
2. من القائمة اختر **Create a new service** (إنشاء خدمة جديدة).
3. اضغط Next أو Continue.

---

## الخطوة 3 — ربط GitHub (مهم: لا تكتب أي مسار هنا)
1. في قسم **Source** أو **Where is your code?** اختر **GitHub**.
2. لو طلب منك ربط حساب GitHub، اضغط **Connect** أو **Authorize** واسمح لـ Koyeb بالوصول.
3. بعد الربط، من القائمة اختر المستودع: **Karas-Chat-App**.
4. في حقل **Branch** اتركه **main**.
5. **مهم جداً:** في أي حقل اسمه **Root directory** أو **Subdirectory** أو **Repository path** في هذه الشاشة — **اتركه فارغاً** أو اترك القيمة الافتراضية. لا تكتب هنا `chat-app/backend`.
6. اضغط **Next** أو **Continue**.

---

## الخطوة 4 — إعدادات البناء (هنا فقط نحدد مجلد الباكند)
1. في **Build type** أو **Buildpack** اختر **Buildpack** (وليس Dockerfile).
2. ابحث عن قسم اسمه **Customize** أو **Override** أو **Build options**.
3. فعّل **Override** واملأ **فقط** الحقلين التاليين (اترك **Work directory فارغاً** حتى لا يظهر خطأ clone):

   | الحقل بالإنجليزي      | اكتب هذا بالضبط بالكامل        |
   |------------------------|----------------------------------|
   | Build command          | `cd chat-app/backend && npm install` |
   | Run command            | `cd chat-app/backend && npm start`   |

4. **Work directory:** اتركه **فارغاً** أو لا تفعّل Override له (لا تكتب فيه شيئاً).
5. اضغط **Next**.

---

## الخطوة 5 — متغيرات البيئة
1. في قسم **Environment variables** اضغط **Add variable** أو **+**.
2. المتغير الأول:
   - **Name:** اكتب `JWT_SECRET`
   - **Value:** اكتب أي كلمة سر طويلة، مثلاً: `KarasChatSecret2024`
3. اضغط **Add variable** مرة ثانية.
4. المتغير الثاني:
   - **Name:** اكتب `CORS_ORIGIN`
   - **Value:** اتركها **فارغة** (لا تكتب شيء).
5. اضغط **Next** أو **Deploy**.

---

## الخطوة 6 — إنهاء النشر
1. اضغط **Deploy** أو **Create service**.
2. انتظر حتى يظهر أن النشر **نجح** (علامة خضراء أو كلمة Success / Running).
3. في الصفحة هتلاقي **رابط** للخدمة، شكله تقريباً: **https://اسم-عشوائي.koyeb.app**
4. **انسخ هذا الرابط** واحتفظ به في ملف نصي أو ورقة — سنستخدمه في Vercel.  
   مثال: `https://karas-chat-app-xxxxx.koyeb.app`  
   **مهم:** لا تضف `/` في نهاية الرابط.

---

# الجزء الثاني: نشر الواجهة على Vercel

## الخطوة 7 — فتح موقع Vercel
1. افتح تاب جديد في المتصفح واكتب: **vercel.com**
2. اضغط Enter.
3. سجّل دخول (يفضل عبر **Continue with GitHub**).

---

## الخطوة 8 — إضافة مشروع من GitHub
1. اضغط **Add New…** ثم **Project**.
2. من القائمة اختر المستودع **Karas-Chat-App** (لو لم يظهر، اضغط **Import** أو **Configure GitHub** واسمح لـ Vercel بالوصول).
3. اضغط **Import** بجانب Karas-Chat-App.

---

## الخطوة 9 — تحديد مجلد الواجهة
1. قبل ما تضغط Deploy، هتشوف إعدادات المشروع.
2. ابحث عن **Root Directory** أو **Project root**.
3. اضغط **Edit** بجانبه.
4. امسح أي شيء مكتوب واكتب بالضبط: **chat-app/frontend**
5. تأكد أنه بدون مسافات قبل أو بعد.

---

## الخطوة 10 — إضافة رابط الباكند (مهم)
1. في نفس الصفحة ابحث عن **Environment Variables** أو **متغيرات البيئة**.
2. في **Name** اكتب: **VITE_API_URL**
3. في **Value** الصق **رابط Koyeb** اللي نسخته في الخطوة 6 (بدون `/` في الآخر).  
   مثال: `https://karas-chat-app-xxxxx.koyeb.app`
4. اضغط **Add** أو **Save**.
5. بعدها اضغط **Deploy** أو **Continue**.

---

## الخطوة 11 — انتظار انتهاء النشر
1. انتظر حتى يظهر **Congratulations** أو **Your project is live**.
2. اضغط **Visit** أو انسخ **رابط الواجهة** (شكله مثل: **https://karas-chat-app-xxxxx.vercel.app**).
3. **هذا الرابط هو رابط الشات** — شاركه مع أي شخص ليفتح الشات من أي مكان.

---

# الجزء الثالث: ربط الباكند بالواجهة (CORS)

## الخطوة 12 — إرجاع Koyeb وتعديل CORS
1. ارجع لتبويب Koyeb وافتح **خدمتك** (اللي أنشأتها في الخطوة 6).
2. اضغط **Settings** أو **Edit** أو أيقونة التعديل.
3. ادخل إلى **Environment variables**.
4. عدّل المتغير **CORS_ORIGIN**: في **Value** الصق **رابط Vercel** بالضبط (اللي نسخته في الخطوة 11)، بدون `/` في الآخر.  
   مثال: `https://karas-chat-app-xxxxx.vercel.app`
5. احفظ التعديل (Save) وأعد النشر (Redeploy) إن طُلب منك.

---

# خلاص

- **رابط الشات للمستخدمين:** رابط Vercel (من الخطوة 11).
- أي شخص يفتح الرابط يسجّل بالبريد أو رقم الموبايل وكلمة المرور ويستخدم الشات.

لو وقفت عند أي رقم خطوة أو ظهرت رسالة خطأ، انسخها واكتب لي رقم الخطوة والرسالة وسأقولك بالضبط ماذا تفعل.
