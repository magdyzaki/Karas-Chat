# نشر الشات باستخدام GitHub + Koyeb + Vercel

استخدام **ثلاثة مواقع فقط:** [GitHub](https://github.com) لحفظ الكود، [Koyeb](https://www.koyeb.com) للباكند، [Vercel](https://vercel.com) للواجهة — ثم الشات يعمل من أي مكان وأي شبكة.

---

## نظرة عامة

| الموقع | الاستخدام |
|--------|------------|
| **GitHub** | حفظ المشروع (مستودع) وربط Koyeb و Vercel به |
| **Koyeb** | تشغيل الباكند (Node) 24/7 وإعطاؤك رابط مثل `https://xxx.koyeb.app` |
| **Vercel** | بناء ورفع الواجهة وإعطاؤك رابط مثل `https://xxx.vercel.app` |

الرابط الذي تشاركه مع الناس = **رابط Vercel**.

---

## الخطوة 1: رفع المشروع على GitHub

1. أنشئ حساباً على [github.com](https://github.com) إن لم يكن لديك.
2. انقر **New repository** واختر اسماً للمستودع (مثلاً `my-chat-app`).
3. على جهازك، من مجلد المشروع الكبير (الذي فيه `chat-app`):

   ```bash
   git init
   git add .
   git commit -m "إضافة مشروع الشات"
   git branch -M main
   git remote add origin https://github.com/اسم-المستخدم/اسم-المستودع.git
   git push -u origin main
   ```

   (استبدل `اسم-المستخدم` و `اسم-المستودع` بقيمك من GitHub.)

الآن الكود موجود على GitHub ويمكن لـ Koyeb و Vercel القراءة منه.

---

## الخطوة 2: نشر الباكند على Koyeb

1. أنشئ حساباً على [koyeb.com](https://www.koyeb.com).
2. من لوحة Koyeb: **Create App** أو **Create Web Service**.
3. **Deploy from GitHub:**
   - اختر مستودعك (مثلاً `my-chat-app`).
   - **Root directory:** اكتب `chat-app/backend` حتى يبني Koyeb من مجلد الباكند فقط.
   - **Build command:** `npm install`
   - **Run command:** `npm start`
4. **Environment variables** (متغيرات البيئة) — أضف:
   - `JWT_SECRET` = أي نص سري طويل (مثلاً سلسلة عشوائية 32 حرفاً).
   - `CORS_ORIGIN` = اتركه فارغاً الآن؛ سنضيفه بعد الحصول على رابط Vercel.
5. انشر الخدمة. بعد الانتهاء ستحصل على رابط مثل:  
   **https://my-chat-app-xxx.koyeb.app**  
   احفظ هذا الرابط — هو عنوان الباكند.

---

## الخطوة 3: نشر الواجهة على Vercel

1. أنشئ حساباً على [vercel.com](https://vercel.com) (يمكن تسجيل الدخول بـ GitHub).
2. **Add New… → Project** واختر المستودع نفسه من GitHub.
3. إعدادات المشروع:
   - **Root Directory:** اختر **Edit** وحدد `chat-app/frontend` فقط.
   - **Framework Preset:** Vite (يفترض أن يكتشفه تلقائياً).
   - **Environment Variables** — أضف:
     - الاسم: `VITE_API_URL`
     - القيمة: **رابط الباكند من Koyeb** (مثل `https://my-chat-app-xxx.koyeb.app`) **بدون** `/` في النهاية.
4. انقر **Deploy**. بعد الانتهاء ستحصل على رابط مثل:  
   **https://my-chat-app-xxx.vercel.app**  
   هذا هو **رابط الشات** الذي تشاركه مع الناس.

---

## الخطوة 4: ربط الباكند بالواجهة (CORS)

1. ارجع إلى **Koyeb** → مشروعك → **Settings** أو **Environment**.
2. عدّل المتغير `CORS_ORIGIN` وضعه = **رابط Vercel بالضبط** (مثل `https://my-chat-app-xxx.vercel.app`).
3. احفظ وأعد النشر إن طُلب منك.

بهذا يصبح الباكند يقبل الطلبات القادمة من واجهة Vercel فقط، والشات يعمل من أي شبكة.

---

## ملخص الروابط

| ماذا | الرابط |
|------|--------|
| حفظ الكود | [GitHub](https://github.com) — مستودعك |
| الباكند (API + Socket) | رابط Koyeb، مثلاً `https://xxx.koyeb.app` |
| الواجهة (الشات للمستخدمين) | رابط Vercel، مثلاً `https://xxx.vercel.app` |

**الرابط الذي تعطيه لأي شخص:** رابط Vercel فقط.

---

## ملاحظات

- **قاعدة البيانات:** على Koyeb (الخطة المجانية) قد يُمسح القرص عند إعادة النشر. للاحتفاظ بالبيانات يمكن لاحقاً استخدام **Koyeb Persistent Storage** أو قاعدة بيانات خارجية.
- **الملفات المرفوعة (صور/ملفات الشات):** قد تُفقد عند إعادة نشر الباكند؛ لاستمراريتها يمكن لاحقاً ربط تخزين سحابي.
- عند تعديل الكود: ادفع التغييرات إلى GitHub (`git add`, `git commit`, `git push`) — Koyeb و Vercel غالباً يعيدان النشر تلقائياً إذا كان الربط مفعّلاً.

بعد تنفيذ الخطوات الأربع أعلاه، الشات يعمل من أي مكان وأي شبكة باستخدام GitHub و Koyeb و Vercel فقط.
